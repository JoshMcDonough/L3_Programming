    <!DOCTYPE html>
    <html>

    <head>
        <title>Flappy bird</title>
        <link rel="stylesheet" type="text/css" href="styles.css">
    </head>

    <body>
        <canvas id="gameCanvas" width="600" height="550"> </canvas>

        <script src="player.js"></script>
        <script src="pipe.js"></script>
        <script>
            var canvas, canvasContext;

            window.onload = function() {
                canvas = document.getElementById('gameCanvas');
                canvasContext = canvas.getContext('2d');

                document.addEventListener('keydown', keyPressed);
                document.addEventListener('keyup', keyReleased);

                setInterval(mainLoop, 1000 / 50);
            }

            //Player Variables
            var xPos = 0;
            var pxPos = 0;
            var pyPos = 0;
            const PLAYER_WIDTH = 30;
            const PLAYER_HEIGHT = 40;
            var Xspeed = 5;
            var Yspeed = 0;
            const SPACE_KEY = 32;

            var spaceKeyPressed = false;
            var gameRun = true;
            var settingUp = true;

            var yVelocity = -2;
            var bird = new Player(pxPos, pyPos, PLAYER_WIDTH, PLAYER_HEIGHT, "yellow", Xspeed, Yspeed)

            //Pipe Variables
            var pipes = [];
            var yRand = 0;
            var pipesTotal = 99;
            var pipeCount = 0;
            var pipePairCount = 0;
            var Gap = 100;

            function mainLoop() {
                if (gameRun == true) {
                    colorRect(0, 0, canvas.width, canvas.height, 'black'); 
                    bird.playerDraw(); 
                    bird.playerMove(); 

                    if (settingUp) { 
                        for (i = 0; i < pipesTotal; i++) {
                            up();
                            bottom();
                        }
                        settingUp = false;
                    }

                    if (pipes.length > 0) {
                        pipes.forEach(function(pipe, i) {
                            pipe.pipeDraw(); 
                            pipe.pipeMove(); 

                            if (pipe.x < 0) { 
                                delete pipes[i];

                            }
                        });
                        pipes = pipes.filter(item => item !== undefined);
                    }
                }
            }

            function up() {
                Gap = Math.floor(Math.random() * (250 - 230) + 230);
                var yPos = 0;
                var xPos = canvas.width + pipePairCount * Gap;
                const WIDTH = 60;
                var height = Math.floor(Math.random() * (200 - 170) + 170);
                var p = new Pipe(xPos, yPos, WIDTH, height, "red", Xspeed)
                pipes.push(p);
            }

            function bottom() {
                var yPos = canvas.height - Math.floor(Math.random() * ((canvas.height * 0.4) - 100) + 100);
                var xPos = canvas.width + pipePairCount * Gap;
                const WIDTH = 60;
                var height = Math.floor(Math.random() * (300 - 200) + 200);
                console.log('Gap: ' + Gap + ' pipeCount: ' + pipePairCount + "=" + xPos);
                var p = new Pipe(xPos, yPos, WIDTH, height, "red", Xspeed)
                pipes.push(p);
                pipePairCount++;
            }

            function colorRect(x, y, w, h, c) { 
                canvasContext.fillStyle = c;
                canvasContext.fillRect(x, y, w, h);
            }

            function keyPressed(evt) { 
                if (evt.keyCode == SPACE_KEY) {
                    spaceKeyPressed = true;
                }
            }

            function keyReleased(evt) { 
                if (evt.keyCode == SPACE_KEY) {
                    spaceKeyPressed = false;
                }
            }

        </script>

    </body>

    </html>
